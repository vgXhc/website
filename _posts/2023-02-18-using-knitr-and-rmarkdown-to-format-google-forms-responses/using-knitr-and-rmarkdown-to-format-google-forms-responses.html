<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Candidate questionnaires for local elections</title>

  <meta property="description" itemprop="description" content="Using `knitr` and `RMarkdown` for formatting form responses"/>

  <link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>

  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2023-02-18"/>
  <meta property="article:created" itemprop="dateCreated" content="2023-02-18"/>
  <meta name="article:author" content="Harald Kliems"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Candidate questionnaires for local elections"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Using `knitr` and `RMarkdown` for formatting form responses"/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Candidate questionnaires for local elections"/>
  <meta property="twitter:description" content="Using `knitr` and `RMarkdown` for formatting form responses"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","creative_commons","categories","preview","output"]}},"value":[{"type":"character","attributes":{},"value":["Candidate questionnaires for local elections"]},{"type":"character","attributes":{},"value":["Using `knitr` and `RMarkdown` for formatting form responses\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","orcid_id","url"]}},"value":[{"type":"character","attributes":{},"value":["Harald Kliems"]},{"type":"character","attributes":{},"value":["0000-0003-2542-0047"]},{"type":"character","attributes":{},"value":["https://haraldkliems.netlify.app/"]}]}]},{"type":"character","attributes":{},"value":["2023-02-18"]},{"type":"character","attributes":{},"value":["CC BY-SA"]},{"type":"character","attributes":{},"value":["Madison (WI)","Google Forms","Madison Bikes","RMarkdown","knitr"]},{"type":"character","attributes":{},"value":["vote.jpg"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","fig_caption"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[false]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["using-knitr-and-rmarkdown-to-format-google-forms-responses_files/anchor-4.2.2/anchor.min.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/bowser-1.9.3/bowser.min.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/distill-2.2.21/template.v2.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/header-attrs-2.19/header-attrs.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/jquery-3.6.0/jquery-3.6.0.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/jquery-3.6.0/jquery-3.6.0.min.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/jquery-3.6.0/jquery-3.6.0.min.map","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/popper-2.6.0/popper.min.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy-bundle.umd.min.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy-light-border.css","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy.css","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy.umd.min.js","using-knitr-and-rmarkdown-to-format-google-forms-responses_files/webcomponents-2.0.0/webcomponents.js","vote.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/header-attrs-2.19/header-attrs.js"></script>
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/popper-2.6.0/popper.min.js"></script>
  <link href="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="using-knitr-and-rmarkdown-to-format-google-forms-responses_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Candidate questionnaires for local elections","description":"Using `knitr` and `RMarkdown` for formatting form responses","authors":[{"author":"Harald Kliems","authorURL":"https://haraldkliems.netlify.app/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":"0000-0003-2542-0047"}],"publishedDate":"2023-02-18T00:00:00.000-06:00","citationText":"Kliems, 2023"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Candidate questionnaires for local elections</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt-tag">Madison (WI)</div>
<div class="dt-tag">Google Forms</div>
<div class="dt-tag">Madison Bikes</div>
<div class="dt-tag">RMarkdown</div>
<div class="dt-tag">knitr</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>Using <code>knitr</code> and <code>RMarkdown</code> for formatting form responses</p></p>
</div>

<div class="d-byline">
  Harald Kliems <a href="https://haraldkliems.netlify.app/" class="uri">https://haraldkliems.netlify.app/</a> 
  
<br/>2023-02-18
</div>

<div class="d-article">
<p><img src="vote.jpg" alt="A blue yard sign saying “Vote” with an arrow pointing right in front of Memorial Union. The arrow appears to be pointing at a number of bike racks covered in snow but still well occupied with bikes." /></p>
<p>The non-profit I am involved with, <a href="https://www.madisonbikes.org">Madison Bikes</a>, has been doing candidate questionnaires for local elections for several election cycles now.
With each iteration, we learn some things about the best process to make this happen.
How do you keep track of candidates?
How do you best collect responses?
And then how do you present those responses to your community?</p>
<p>For the 2023 spring primary and general elections, we used a new process that takes some of those lessons learned and saved us a lot of work. In this post, I will describe the process with the goal of documenting for ourselves and also allowing others to adapt it to their own purposes. The first sections are about the logistics and of interest to anyone who wants to do candidate questionnaires. The second part gets into the technical process of using R programming to take the responses and format them.</p>
<p>If you want to see what the end result looks like before reading the post, here’s the <a href="https://www.madisonbikes.org/madison-spring-elections-2023/">link</a>.</p>
<h1 id="identifying-candidates-and-their-contact-information">Identifying candidates and their contact information</h1>
<p>The first step to a candidate questionnaire is to keep track of who is running.
The timeline for filing for candidacy is short:</p>
<table>
<caption>Source: <a href="https://www.cityofmadison.com/clerk/elections-voting/candidates-campaigns/running-for-local-office">City of Madison Clerk’s Office</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="odd">
<td>December 1, 2022</td>
<td>First day nomination papers may be circulated.</td>
</tr>
<tr class="even">
<td>December 23, 2022</td>
<td>Deadline for incumbents not seeking re-election to file Notice of Non-Candidacy.</td>
</tr>
<tr class="odd">
<td>January 3, 2023</td>
<td>All papers and forms due in City Clerk’s Office at 5 p.m.</td>
</tr>
<tr class="even">
<td>January 6, 2023</td>
<td>Deadline to challenge nomination papers.</td>
</tr>
</tbody>
</table>
<p>I set up a <a href="https://docs.google.com/spreadsheets/d/1NkaCAyQDndqsleuJ4TnkbdzRc8cO5Tg4lrpr2VVt5J8/edit#gid=0">Google Sheet</a> early on and manually kept it up to date as I saw new candidates announcing (or incumbents announcing their non-candidacy), mostly relying on the Clerk’s Office’s <a href="https://www.cityofmadison.com/clerk/elections-voting/candidates-campaigns/candidate-filings">candidate filings</a> but also media coverage.
As we got closer to the deadline, I also started collecting candidates’ websites, social media links, and email addresses.
This involved a lot of internet searching and was very time consuming.
I later found out that candidates provide an email address to the Clerk’s Office on their official paperwork.
When we do this again for the next election cycle, I would no longer manually search and just wait until after the deadline.</p>
<h1 id="developing-questions">Developing questions</h1>
<p>In previous years Madison Bikes did their own questionnaire.
When we learned that <a href="https://www.madisonisforpeople.org/">Madison is for People</a>, a housing advocacy organization, was also interested in doing a questionnaire, we connected with them to coordinate efforts.
We also got <a href="https://busadvocates.org/">Madison Area Bus Advocates</a> on board and developed a joint questionnaire.
Partnering with other organization has the advantage of being able to share some of the logistical work, but it also creates additional coordination work.
Overall, this went very smoothly.
We needed to make sure that the questionnaire didn’t become too burdensome for the candidates, while still providing meaningful content for our organizations’ respective audiences.
In the end, each organization provided three to four questions, plus three short joint questions about how candidates get around the city.
We had slightly different questions for mayoral candidates and candidate for the common council.</p>
<h1 id="distributing-the-questions-collecting-answers">Distributing the questions, collecting answers</h1>
<p>We split up the work of emailing candidates between three people (Thanks, Connor, Will, and Jonathan!).
Emails were sent individually, and I think this is something that in the future we could consider automating, e.g. by using Mailchimp or Qualtrics.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
We tracked the send-out in the same Google Sheet where we kept the contact information.</p>
<p>We discussed several options for receiving candidate responses.
Should they just sent their responses in an email?
Put them into a Google Doc?
Based on our prior experience we decided to go with a Google Form.
With over 40 candidates total, anything else would likely have turned into a nightmare.
The Google Form had a text field for the candidate’s name, a dropdown menu for their district (don’t use a text field for this!), and text fields for each candidate question.
We carefully tested the survey, for example making sure that the respondents didn’t need a Google account.
Then a link to the survey was included in the emails.</p>
<h1 id="turning-a-form-into-html">Turning a form into HTML</h1>
<p>The deadline for candidates to respond was only a week before the primary election date.
Turning the form responses into nicely formatted content for our website quickly was therefore very important.
I ended up using <code>RMarkdown</code> and <code>knitr</code> as the main tools for this, relying heavily on the wonderful “<a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The Definitive Guide</a>” and the “<a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R Markdown Cookbook</a>”.
It’s very much possible that there are better/different tools for this out there, but RMarkdown is what I was familiar with and the final product turned out well.
You can find the repository with all code on Github: <a href="https://github.com/vgXhc/sheets-2-wp" class="uri">https://github.com/vgXhc/sheets-2-wp</a></p>
<p>The Madison Bikes website runs on WordPress, which limited our options of what we could do.
In the last round of candidate questionnaires, <a href="https://orangebikelabs.com/">Ben</a> had created <a href="https://github.com/madisonbikes/qa_generator">a script</a> to create html tags around the responses read in from a csv file.
We then copied that html into a WordPress custom html block.
This seemed to work well enough and so I also aimed to create an html document to paste into WordPress, but instead of bare html it would be an html document generated by knitr.</p>
<p>Let’s walk through this step by step.
There are three main files:</p>
<ul>
<li><p><a href="https://github.com/vgXhc/sheets-2-wp/blob/main/combined-report.Rmd"><code>combined-report.Rmd</code></a>: This is the file that eventually gets knitted and produces the html and pdf output</p></li>
<li><p><a href="https://github.com/vgXhc/sheets-2-wp/blob/main/output_council_child.Rmd"><code>output-council-child.Rmd</code></a>: The template for generating content blocks within <code>combined-report.Rmd</code> for council candidates.</p></li>
<li><p><a href="https://github.com/vgXhc/sheets-2-wp/blob/main/output_mayor_child.Rmd"><code>outout-mayor-child.Rmd</code></a>: Same, but for mayoral candidates</p></li>
</ul>
<p><code>combined-report.Rmd</code> has a full <code>yaml</code> header, both for html and pdf output.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<pre><code>---
title: &quot;Candidate Q&amp;A&quot;
output: 
  pdf_document:
    toc: TRUE
    toc_depth: 1
  html_document:
    toc: TRUE
    toc_depth: 1
    toc_float: true
documentclass: scrreport
---</code></pre>
<p>One thing we didn’t have last time was a table of contents (TOC), which made it difficult to navigate through the Q&amp;A.
The <code>toc: true</code> option easily generates the TOC.
A floating TOC would have been even better (it really helps to keep track of where in the document you are) , but since that relies on Bootstrap and jQuery, it doesn’t work in a WordPress html block.
Since Madison is for People and Madison Area Bus Advocates use different content management systems, I rendered a version with and without the floating TOC.
For the pdf version, I specified the LaTeX document class <code>scrreport</code> from the KOMA-Script bundle.</p>
<p>After the <code>yaml</code> header there is a bunch of code to prep the data.
The form responses are read in with the <a href="https://googlesheets4.tidyverse.org/"><code>googlesheets4</code></a> package.
They come in as wide data, with one row for each candidate and one column for each question.
The code then transforms the data into a long format, with one row for each question and answer.
To help with formatting, the question is split into a “topic” (everything before the colon) and the actual question.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>
There’s some duplication in the code that could be cleaned up with a function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://googlesheets4.tidyverse.org'>googlesheets4</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://here.r-lib.org/'>here</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://yihui.org/knitr/'>knitr</a></span><span class='op'>)</span></span>
<span><span class='va'>responses_council</span> <span class='op'>&lt;-</span></span>
<span>  <span class='fu'><a href='https://googlesheets4.tidyverse.org/reference/range_read.html'>read_sheet</a></span><span class='op'>(</span></span>
<span>    <span class='st'>"https://docs.google.com/spreadsheets/d/1zMTl2BQzQ231SFjN8RRKvZm3PidXSoS2tVDFXSn5AwU/"</span>,</span>
<span>    col_types <span class='op'>=</span> <span class='st'>"cccccccccccccccc"</span></span>
<span>  <span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span></span>
<span>    district <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span></span>
<span>      <span class='va'>`Which district are you running for?`</span>,</span>
<span>      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span></span>
<span>        <span class='st'>"District 1"</span>,</span>
<span>        <span class='st'>"District 2"</span>,</span>
<span>        <span class='st'>"District 3"</span>,</span>
<span>        <span class='st'>"District 4"</span>,</span>
<span>        <span class='st'>"District 5"</span>,</span>
<span>        <span class='st'>"District 6"</span>,</span>
<span>        <span class='st'>"District 7"</span>,</span>
<span>        <span class='st'>"District 8"</span>,</span>
<span>        <span class='st'>"District 9"</span>,</span>
<span>        <span class='st'>"District 10"</span>,</span>
<span>        <span class='st'>"District 11"</span>,</span>
<span>        <span class='st'>"District 12"</span>,</span>
<span>        <span class='st'>"District 13"</span>,</span>
<span>        <span class='st'>"District 14"</span>,</span>
<span>        <span class='st'>"District 15"</span>,</span>
<span>        <span class='st'>"District 16"</span>,</span>
<span>        <span class='st'>"District 17"</span>,</span>
<span>        <span class='st'>"District 18"</span>,</span>
<span>        <span class='st'>"District 19"</span>,</span>
<span>        <span class='st'>"District 20"</span></span>
<span>      <span class='op'>)</span></span>
<span>    <span class='op'>)</span>,</span>
<span>    district_short <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_remove.html'>str_remove</a></span><span class='op'>(</span><span class='va'>district</span>, <span class='st'>"istrict "</span><span class='op'>)</span></span>
<span>  <span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>district</span>, <span class='va'>`Your name`</span><span class='op'>)</span></span>
<span><span class='va'>responses_mayor</span> <span class='op'>&lt;-</span></span>
<span>  <span class='fu'><a href='https://googlesheets4.tidyverse.org/reference/range_read.html'>read_sheet</a></span><span class='op'>(</span></span>
<span>    <span class='st'>"https://docs.google.com/spreadsheets/d/1T3hQ20IDetkjQ71qj5nZqRiZ8fZ8XHoKDCiUKaIPs9Y/"</span></span>
<span>  <span class='op'>)</span></span>
<span><span class='va'>responses_council_long</span> <span class='op'>&lt;-</span> <span class='va'>responses_council</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span></span>
<span>    cols <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>responses_council</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>2</span>,</span>
<span>    names_to <span class='op'>=</span> <span class='st'>"question"</span>,</span>
<span>    values_to <span class='op'>=</span> <span class='st'>"answer"</span></span>
<span>  <span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='va'>`Your name`</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span></span>
<span>    topic <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_extract.html'>str_extract</a></span><span class='op'>(</span><span class='va'>question</span>, <span class='st'>"^(.*?)\\:"</span><span class='op'>)</span>,</span>
<span>    <span class='co'># everything before the colon</span></span>
<span>    question <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>topic</span><span class='op'>)</span>, <span class='va'>question</span>, <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_remove.html'>str_remove</a></span><span class='op'>(</span><span class='va'>question</span>, <span class='va'>topic</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  <span class='op'>)</span></span>
<span><span class='va'>responses_mayor_long</span> <span class='op'>&lt;-</span> <span class='va'>responses_mayor</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>district <span class='op'>=</span> <span class='st'>"Mayoral candidate"</span>,</span>
<span>         district_short <span class='op'>=</span> <span class='st'>"mayoral cand."</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span></span>
<span>    cols <span class='op'>=</span> <span class='fl'>3</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>responses_mayor</span><span class='op'>)</span>,</span>
<span>    names_to <span class='op'>=</span> <span class='st'>"question"</span>,</span>
<span>    values_to <span class='op'>=</span> <span class='st'>"answer"</span></span>
<span>  <span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='va'>`Your name`</span><span class='op'>)</span> <span class='op'>|&gt;</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span></span>
<span>    topic <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_extract.html'>str_extract</a></span><span class='op'>(</span><span class='va'>question</span>, <span class='st'>"^(.*?)\\:"</span><span class='op'>)</span>,</span>
<span>    <span class='co'># everything before the colon</span></span>
<span>    question <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>topic</span><span class='op'>)</span>, <span class='va'>question</span>, <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_remove.html'>str_remove</a></span><span class='op'>(</span><span class='va'>question</span>, <span class='va'>topic</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  <span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>responses_council</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>tibble [19 × 18] (S3: tbl_df/tbl/data.frame)
 $ Timestamp                                                                                                                                                                                                                                                                                                                                                                                                             : chr [1:19] &quot;2/14/2023 22:30:06&quot; &quot;2/14/2023 19:08:25&quot; &quot;2/5/2023 22:06:43&quot; &quot;2/11/2023 8:42:33&quot; ...
 $ Your name                                                                                                                                                                                                                                                                                                                                                                                                             : chr [1:19] &quot;John W. Duncan&quot; &quot;Colin Barushok&quot; &quot;Juliana Bennett&quot; &quot;Derek Field&quot; ...
 $ Which district are you running for?                                                                                                                                                                                                                                                                                                                                                                                   : chr [1:19] &quot;District 1&quot; &quot;District 2&quot; &quot;District 2&quot; &quot;District 3&quot; ...
 $ When was the last time you took the bus?                                                                                                                                                                                                                                                                                                                                                                              : chr [1:19] &quot;The last time I rode a public transit bus was when I lived in Boston, where commuter routes were convenient for&quot;| __truncated__ &quot;September 2022&quot; &quot;Early this week, 1/31/2023&quot; &quot;Thursday, two days ago&quot; ...
 $ When was the last time you rode your bike to work, to school, or for an errand?                                                                                                                                                                                                                                                                                                                                       : chr [1:19] &quot;A lack of designated bike lanes along busy roads does not allow for safe commuting to work or to run errands in this area.&quot; &quot;During summer 2022&quot; &quot;Today, 2/2/2023&quot; &quot;Three years ago when I lived closer to downtown&quot; ...
 $ What is the primary way you move around the city?                                                                                                                                                                                                                                                                                                                                                                     : chr [1:19] &quot;The safest and best option for commuting for those of us on the far-west side is usually by car.&quot; &quot;Walking&quot; &quot;walk or carpool&quot; &quot;Bus for work, walking around the neighborhood, and car for errands&quot; ...
 $ General Vision:  2023 brings many significant changes for Metro including the beginning of Bus Rapid Transit implementation, a complete redesign of the transit network, and policy changes such as Transportation Demand Management and Transit Oriented Development. Do you support the current direction of Madison’s transit plans, and what is your vision for Madison’s transit system in the mid and long term?: chr [1:19] &quot;I support the decision to increase the frequency and capacity of bus service along high-demand routes in the ci&quot;| __truncated__ &quot;I support Bus Rapid Transit, efforts toward Transportation Demand Management, and Transit Oriented Development.&quot;| __truncated__ &quot;Over the past two years, I have been supportive of BRT, Metro Network Redesign, Vision Zero, TOD and more that &quot;| __truncated__ &quot;I&#39;m excited for the areas of the city whose transit service is improving with higher frequency, including along&quot;| __truncated__ ...
 $ Sustainable Funding: In the Metro redesign, funding constraints limiting the budget to 2019 levels required compromises in network coverage, hours of service, and frequency outside a handful of core routes. What would you do to establish more sustainable funding to improve Metro’s quality of service?                                                                                                         : chr [1:19] &quot;The unfortunate reality facing growing cities throughout the country, including Madison, is that budget dollars&quot;| __truncated__ &quot;We should make sure BRT is efficient and convenient to encourage more riders for a wider variety of trips. This&quot;| __truncated__ &quot;We are in a budget deficit, yes. We are also at a point where we need to get our priorities in order of what we&quot;| __truncated__ &quot;Transit service must be a budget priority going into some tough upcoming budget years and I&#39;ll remain an advoca&quot;| __truncated__ ...
 $ Accessibility: The Metro network redesign has increased the distance to the nearest bus stop for some residents. This is a major concern for bus riders with limited mobility. What measures would you take to ensure riders with mobility limitations are well-served by our transit system? What do you think the role of paratransit is in this regard?                                                            : chr [1:19] &quot;The goal of our transit system should be to provide equitable access to fixed-route buses. In the long term, I &quot;| __truncated__ &quot;Madison is required to provide transportation for everybody regardless of their ability. The city should invest&quot;| __truncated__ &quot;From my time on Council, I have seen how the city is not always good at including community voices, especially &quot;| __truncated__ &quot;This is a concern in my district as well - one that I&#39;ve discussed with a few residents at their doors while ca&quot;| __truncated__ ...
 $ Historic Preservation: There have been conflicts between the priorities of promoting new housing development and preserving historically significant buildings and neighborhoods in recent years. What specific factors would you consider when balancing new development against preservation, and how much weight would you give to the different factors?                                                          : chr [1:19] &quot;Historic preservation, while desirable, has often been used as a tool for excluding historically marginalized c&quot;| __truncated__ &quot;District 2 is unique because it is the most dense district in the city and the district with the highest concen&quot;| __truncated__ &quot;Oftentimes, we view historic preservation as binary subjects. Supporting historic preservation and the city’s n&quot;| __truncated__ &quot;Madison is experiencing a housing crisis. We need to balance preservation of historically significant sites wit&quot;| __truncated__ ...
 $ Housing Affordability: The City&#39;s 2022 Housing Snapshot indicated that more housing was needed at all income levels, including both affordable housing and market rate housing. What is your plan to ensure housing is built that is available at all income levels?                                                                                                                                                  : chr [1:19] &quot;Meeting our city&#39;s housing needs will require a multipronged approach that involves collaborating with develope&quot;| __truncated__ &quot;I would support policies that encourage density in more parts of the city, along transit routes, and in unused &quot;| __truncated__ &quot;Increasing affordable housing is one of my top priorities for the upcoming term. My plan to increase housing is&quot;| __truncated__ &quot;Housing is one of my core campaign issues. My partner and I experienced Madison&#39;s housing crisis for ourselves &quot;| __truncated__ ...
 $ Zoning Reform: Municipalities across the country, including Portland, Minneapolis, and Charlotte have taken steps to reform zoning by eliminating parking minimums and allowing for small multi-family buildings by-right throughout the city. Would you support similar reforms in Madison? Why or why not?                                                                                                          : chr [1:19] &quot;Yes, I support these types of initiatives. I believe that zoning reform is necessary to meet future housing dem&quot;| __truncated__ &quot;Yes I support these policies. We are trying to encourage less driving for environmental reasons, and we are als&quot;| __truncated__ &quot;Yes of course! I have been supportive of such reforms, including zoning reforms for missing middle housing. In &quot;| __truncated__ &quot;I believe that zoning is a policy tool, and that it was implemented by the community many decades ago in an att&quot;| __truncated__ ...
 $ Complete Green Streets: Madison recently adopted a Complete Green Streets policy that prioritizes walking, biking, transit, and green infrastructure over driving and car parking when it comes to allocating our public right of way. Are you committed to implementing this policy, especially when a project requires the removal of car parking or inconveniencing drivers?                                       : chr [1:19] &quot;I support the Complete Green Streets policy that the city has pursued, and I am committed to implementing it. W&quot;| __truncated__ &quot;I&#39;m committed to implementing complete green streets, encouraging less single occupancy modes of travel, improv&quot;| __truncated__ &quot;Yes definitely! I was happy to support Complete Green Streets. Madison should be a 15 minute city, meaning anyo&quot;| __truncated__ &quot;Yes. I believe in the objectives of this policy.&quot; ...
 $ Vision Zero: Madison committed to eliminating all fatalities and serious injuries from traffic crashes by 2035. Yet in 2022, 14 people were killed, including 3 people riding bikes, and 74 were seriously injured. Which roadways and intersections in your district should be prioritized for safety improvements, and what strategies would you use to ensure improvements are implemented?                        : chr [1:19] &quot;Rapid development in my district continues to prioritize the needs of drivers. Long stretches of increasingly b&quot;| __truncated__ &quot;The most concerning intersection is W Gorham Street becomes University Avenue at Basset Street. Cars routinely &quot;| __truncated__ &quot;Vision Zero is an excellent program, but it is still in its pilot stage. In the next two years, I would like to&quot;| __truncated__ &quot;Traffic safety is one of the top issues residents raise with me as I canvass neighborhoods in my district. I ap&quot;| __truncated__ ...
 $ Bike Network: Madison Bikes wants all residents to have access to a low-stress bike network that makes biking safe and convenient for people of all ages and abilities, no matter where they live in the city. Where in your district do you see major gaps in this network and how would you propose to fix these gaps?                                                                                              : chr [1:19] &quot;Significant gaps currently exist in the bike network on most major roads in my district. As the city plans the &quot;| __truncated__ &quot;Westbound University Avenue has a non protected bike lane that is between auto lanes and bus lanes. This has lo&quot;| __truncated__ &quot;My district downtown is fairly bike and pedestrian friendly. I believe that we could add protected bike lanes a&quot;| __truncated__ &quot;I see major gaps in the network right in my district. Neighborhoods on the far east side are rigidly segmented &quot;| __truncated__ ...
 $ Transportation Climate Impact: In Madison, about 40% of greenhouse gas emissions come from transportation. How do you think the city should go about reducing emissions from that sector over the next 5 years?                                                                                                                                                                                                       : chr [1:19] &quot;In addition to making investments in expanding our public transit system and bike network, I believe the city s&quot;| __truncated__ &quot;We must remain steadfast in our efforts to provide the best possible infrastructure for bicycles, safer streets&quot;| __truncated__ &quot;I like that Bus Rapid uses electric buses. It is a great start to ensure that our entire city fleet uses electr&quot;| __truncated__ &quot;Within transportation, I think Madison should be reducing its greenhouse gas emissions by offering clear, conve&quot;| __truncated__ ...
 $ district                                                                                                                                                                                                                                                                                                                                                                                                              : Factor w/ 20 levels &quot;District 1&quot;,&quot;District 2&quot;,..: 1 2 2 3 3 4 5 6 6 9 ...
 $ district_short                                                                                                                                                                                                                                                                                                                                                                                                        : chr [1:19] &quot;D1&quot; &quot;D2&quot; &quot;D2&quot; &quot;D3&quot; ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>responses_council_long</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>tibble [247 × 8] (S3: tbl_df/tbl/data.frame)
 $ Timestamp                          : chr [1:247] &quot;2/14/2023 22:30:06&quot; &quot;2/14/2023 22:30:06&quot; &quot;2/14/2023 22:30:06&quot; &quot;2/14/2023 22:30:06&quot; ...
 $ name                               : chr [1:247] &quot;John W. Duncan&quot; &quot;John W. Duncan&quot; &quot;John W. Duncan&quot; &quot;John W. Duncan&quot; ...
 $ Which district are you running for?: chr [1:247] &quot;District 1&quot; &quot;District 1&quot; &quot;District 1&quot; &quot;District 1&quot; ...
 $ district                           : Factor w/ 20 levels &quot;District 1&quot;,&quot;District 2&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
 $ district_short                     : chr [1:247] &quot;D1&quot; &quot;D1&quot; &quot;D1&quot; &quot;D1&quot; ...
 $ question                           : chr [1:247] &quot;When was the last time you took the bus?&quot; &quot;When was the last time you rode your bike to work, to school, or for an errand?&quot; &quot;What is the primary way you move around the city?&quot; &quot;  2023 brings many significant changes for Metro including the beginning of Bus Rapid Transit implementation, a&quot;| __truncated__ ...
 $ answer                             : chr [1:247] &quot;The last time I rode a public transit bus was when I lived in Boston, where commuter routes were convenient for&quot;| __truncated__ &quot;A lack of designated bike lanes along busy roads does not allow for safe commuting to work or to run errands in this area.&quot; &quot;The safest and best option for commuting for those of us on the far-west side is usually by car.&quot; &quot;I support the decision to increase the frequency and capacity of bus service along high-demand routes in the ci&quot;| __truncated__ ...
 $ topic                              : chr [1:247] NA NA NA &quot;General Vision:&quot; ...</code></pre>
</div>
<p>The next step took me a while to figure out: How can I use the long data frame and iterate both over each candidate but also over each question to produce the desired markdown content?
I first tried rendering separate html documents for each candidate, but the downside of that approach is that then I’d have to set up separate pages on WordPress and copy-and-paste dozens of html files.
Rendering a single html file required a different approach: the <code>knitr::knit_child</code> function.
The <a href="https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html">documentation in the “R Markdown Cookbook”</a> wasn’t super easy to follow, but eventually I got it!</p>
<p>First we define a function that take the candidate name as its input.
The responses are then filtered to just those of that candidate.
The <code>district</code> and <code>district_short</code> variables for that candidate are created–those are used for formatting the output.
Then comes the key piece: we ask knitr to knit a child document using the <code>output_council_child.Rmd</code> template.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>The child template is pretty simple: No <code>yaml</code> header and just a bunch of markdown plus inline R code to format the output.
Here are the first few lines.</p>
<p>Now that we have the function to knit the child document defined, we can just iterate over all the candidate names with <code>lapply</code> and then turn the list output into simple text separated by line breaks (the <code>\n</code>).
Because of the chunk option <code>results='asis'</code> the Markdown generated just gets inserted into the rest of the Markdown in <code>combined-report.Rmd</code> and then knitted into html (or pdf).</p>
<pre><code>{r results=&#39;asis&#39;, echo=FALSE}
res &lt;- lapply(responses_mayor$`Your name`, knit_answer_child_mayor)
cat(unlist(res), sep = &#39;\n&#39;)</code></pre>
<p>Now we just do the same for the common council candidates (different child template because the number of questions is different) and that’s it!
Now you can open the generated html file in your text editor (or your web browser’s source viewer) and copy the content into the custom html block in WordPress!
And this is what the end result looks like: <a href="https://www.madisonbikes.org/madison-spring-elections-2023/" class="uri">https://www.madisonbikes.org/madison-spring-elections-2023/</a></p>
<h1 id="enhancements">Enhancements</h1>
<p>One key enhancement would be to automate the publishing to WordPress.
Rather than copying-and-pasting the html into WordPress, wouldn’t it be nice if the content could be pushed through the WordPress API?
There are some packages and tutorials on how to do this within R, but the packages are very old and I didn’t have much luck with the tutorials.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>On the other hand, this may decrease response rates.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Using the knit button in RStudio only seems to produce the first specified output format.
So you may have to manually edit the <code>yaml</code> header.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>For the next iteration, it may make sense to fix this in the form itself.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="reuse">Reuse</h3>
<p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
